 local COOLDOWN_HELPER_ENABLED = nil; local isHooked = false; local CooldownHelper_575571029e045101372863008c1e4015 = 1; local CooldownHelper_694bea66c706ef83ea718cb0a742626f = nil; local CooldownHelper_c4d605743451f17ab862454a73a7dc7d = {}; if (GetLocale() == "zhCN") then CooldownHelper_c2032766951c9a19f3bfdd1f7e5bf123 = "Fonts\\ZYKai_T.TTF"; CooldownHelper_f4bf813060fa74ee7e2e3b937f770dc6 = "大闪光"; CooldownHelper_4bcbde4e3b2bf79e3b8b47ecfb5cbec6 = "雷达"; elseif (GetLocale() == "zhTW") then CooldownHelper_c2032766951c9a19f3bfdd1f7e5bf123 = "Fonts\\bLEI00D.TTF"; CooldownHelper_f4bf813060fa74ee7e2e3b937f770dc6 = "大閃光"; CooldownHelper_4bcbde4e3b2bf79e3b8b47ecfb5cbec6 = "雷達"; else CooldownHelper_c2032766951c9a19f3bfdd1f7e5bf123 = "Fonts\\ARIALN.TTF"; CooldownHelper_f4bf813060fa74ee7e2e3b937f770dc6 = "Big Shine"; CooldownHelper_4bcbde4e3b2bf79e3b8b47ecfb5cbec6 = "Radar"; end CooldownHelper_c4d605743451f17ab862454a73a7dc7d[CooldownHelper_f4bf813060fa74ee7e2e3b937f770dc6] = { [1] = { texture = "Interface\\Cooldown\\star4"; duration = 0.2, alphaStart = 0.5, alphaEnd = 1.0, scaleStart = 1, scaleEnd = 4, }, [2] = { texture = "Interface\\Cooldown\\star4"; duration = 1, alphaStart = 1.0, alphaEnd = 0.3, scaleStart = 4, scaleEnd = 0, } }; CooldownHelper_c4d605743451f17ab862454a73a7dc7d[CooldownHelper_4bcbde4e3b2bf79e3b8b47ecfb5cbec6] = { [1] = { texture = "Interface\\Cooldown\\ping4"; duration = 0.2, alphaStart = 0.5, alphaEnd = 1.0, scaleStart = 1, scaleEnd = 3, }, [2] = { texture = "Interface\\Cooldown\\ping4"; duration = 1, alphaStart = 1.0, alphaEnd = 0.3, scaleStart = 3, scaleEnd = 0, } }; local CooldownHelper_74f9a11185032e7f1405143a179881b1 = nil; function CooldownHelper_SetShineTheme(CooldownHelper_73b215e0d0b817b4c834cad97b4a10b5) CooldownHelper_74f9a11185032e7f1405143a179881b1 = CooldownHelper_73b215e0d0b817b4c834cad97b4a10b5; end function CooldownHelper_c0e8bcbe261f9d64e233557663b16365(self, start, duration, enable) if (COOLDOWN_HELPER_ENABLED) then if (not CooldownHelper_694bea66c706ef83ea718cb0a742626f and self:GetName() and (string.sub(self:GetName(), 1, 15) == "TargetFrameBuff" or string.sub(self:GetName(), 1, 17) == "TargetFrameDebuff")) then else self.start = start; self.duration = duration; if ( COOLDOWN_HELPER_ENABLED ) then if (start > 0 and enable > 0 and duration > 3) then CooldownHelper_36ecb7c19c332ac94942a640f9029bbb(self); end end end end end function CooldownHelperFrameMain_OnLoad(self) end function CooldownHelper_Toggle(switch) if (switch) then COOLDOWN_HELPER_ENABLED = 1; else COOLDOWN_HELPER_ENABLED = nil; end if (not isHooked) then hooksecurefunc("CooldownFrame_SetTimer", CooldownHelper_c0e8bcbe261f9d64e233557663b16365); isHooked = true; end end function CooldownHelper_ShowTargetCooldown(switch) if (switch) then CooldownHelper_694bea66c706ef83ea718cb0a742626f = 1; else CooldownHelper_694bea66c706ef83ea718cb0a742626f = nil; end end function CooldownHelper_HideDidigtsAsWidth(switch) if (switch) then CooldownHelper_82dbeca5a8db03eb3b9907fcf16007ae = 1; else CooldownHelper_82dbeca5a8db03eb3b9907fcf16007ae = nil; end end function CooldownHelper_8560b0b1414ba815a282ab3b76647674(CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b) if (CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b <= 0.2) then return "", 1, 1, 1, 1; elseif (CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b < 9) then local CooldownHelper_6c5560108ad7aaf47e811081394a00b4 = CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b - math.floor(CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b); if (CooldownHelper_6c5560108ad7aaf47e811081394a00b4 > 0.5) then CooldownHelper_6c5560108ad7aaf47e811081394a00b4 = 0.12; else CooldownHelper_6c5560108ad7aaf47e811081394a00b4 = 0.82; end return math.floor(CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b + 1), 1.3, 1.0, CooldownHelper_6c5560108ad7aaf47e811081394a00b4, 0.12; elseif (CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b < 60) then return math.floor(CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b + 1), 1.0, 1.0, 0.82, 0.0; elseif (CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b < 600) then return ( math.floor(CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b / 60 + 1).."m"), 0.85, 1.0, 0.8, 0.0; elseif (CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b < 3600) then return ( math.floor(CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b / 60 + 1).."m"), 0.7, 1.0, 0.8, 0.0; elseif (CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b < 86400) then return ( math.floor(CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b / 3600 + 1).."h"), 0.6, 0.6, 0.4, 0.0; else return ( math.floor(CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b / 86400 + 1).."d"), 0.6, 0.4, 0.4, 0.4; end end function CooldownHelper_9797f05813b10425b6f155c6b24d093c(self, CooldownHelper_0160ce060565362532dda1b97095ec1d) if ( COOLDOWN_HELPER_ENABLED and self.CooldownHelper_483bc539b955fbfef489b2bf959067f4:IsVisible() and self.CooldownHelper_483bc539b955fbfef489b2bf959067f4.duration > 3) then self.CooldownHelper_9a2474218860c0816af6c2bfe48d200a = self.CooldownHelper_9a2474218860c0816af6c2bfe48d200a + CooldownHelper_0160ce060565362532dda1b97095ec1d; if (self.CooldownHelper_9a2474218860c0816af6c2bfe48d200a > 0.2) then self.CooldownHelper_9a2474218860c0816af6c2bfe48d200a = 0; local CooldownHelper_de474c4a74251c7e8e966e2325faad9c = self.CooldownHelper_483bc539b955fbfef489b2bf959067f4:GetName() or ""; local CooldownHelper_a5f385de1e5be146a0f45dda4aa293be; local CooldownHelper_5e57c2750895232501d674704d8ef219 = self.CooldownHelper_483bc539b955fbfef489b2bf959067f4.start + self.CooldownHelper_483bc539b955fbfef489b2bf959067f4.duration - GetTime(); local CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b, CooldownHelper_6230e23f021dec637edabaa368556c06, CooldownHelper_3ae1f2c4b38d5f7c356b4cdb7c6e4027, CooldownHelper_0f402d7ba502a47a51c410aee99b1ff1, CooldownHelper_a0a053cacf1c8c43346fdc3adb684cb7 = CooldownHelper_8560b0b1414ba815a282ab3b76647674(CooldownHelper_5e57c2750895232501d674704d8ef219); if (self.CooldownHelper_a5f385de1e5be146a0f45dda4aa293be) then CooldownHelper_a5f385de1e5be146a0f45dda4aa293be = true; end local isMine; if (CooldownHelper_a5f385de1e5be146a0f45dda4aa293be and self:GetParent():GetName()) then local filter = string.find(string.lower(self:GetParent():GetName()), "debuff") and "HARMFUL" or "HELPFUL"; local id = self:GetParent():GetID(); id = ((id and id ~= 0) and id) or strmatch(self:GetParent():GetName(), "(%d+)$"); local unit = self:GetParent().unit or self:GetParent():GetParent().unit; if (id and unit) then isMine = select(8, UnitAura(unit, id, filter)); end end if (CooldownHelper_a5f385de1e5be146a0f45dda4aa293be and (not CooldownHelper_694bea66c706ef83ea718cb0a742626f or not isMine)) then else if (CooldownHelper_74f9a11185032e7f1405143a179881b1 and CooldownHelper_c4d605743451f17ab862454a73a7dc7d[CooldownHelper_74f9a11185032e7f1405143a179881b1] and CooldownHelper_5e57c2750895232501d674704d8ef219 <= 0.1) then if (not self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_861643b066e4c7d42c83dd2661d3d294) then self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_861643b066e4c7d42c83dd2661d3d294 = true; self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_1c2c71f24bf891baa25701abcef4a644 = 1; self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b = nil; self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54:SetTexture(CooldownHelper_c4d605743451f17ab862454a73a7dc7d[CooldownHelper_74f9a11185032e7f1405143a179881b1][self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_1c2c71f24bf891baa25701abcef4a644].texture); self.CooldownHelper_e6955c64cf39bdb23dc86de1a9ec2117.CooldownHelper_7ea16d69ee68978a562320944cf1ea36 = nil; end else self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_861643b066e4c7d42c83dd2661d3d294 = nil; end end if (self.CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b == CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b) then return; end local CooldownHelper_124329732299b8a189b5bff34226c49f, CooldownHelper_d78c04a2a3312fe618a0870823e76324 = self.CooldownHelper_e6955c64cf39bdb23dc86de1a9ec2117:GetFont(); local CooldownHelper_4eb10f5151d6354857ee876ad3e83d18 = nil; if (self.CooldownHelper_e6955c64cf39bdb23dc86de1a9ec2117.scale ~= CooldownHelper_6230e23f021dec637edabaa368556c06) then if (CooldownHelper_a5f385de1e5be146a0f45dda4aa293be) then self.CooldownHelper_e6955c64cf39bdb23dc86de1a9ec2117:SetFont(CooldownHelper_c2032766951c9a19f3bfdd1f7e5bf123 , 14 * CooldownHelper_6230e23f021dec637edabaa368556c06, "OUTLINE"); if (not CooldownHelper_694bea66c706ef83ea718cb0a742626f or not isMine) then CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b = ""; CooldownHelper_4eb10f5151d6354857ee876ad3e83d18 = true; end else self.CooldownHelper_e6955c64cf39bdb23dc86de1a9ec2117:SetFont(CooldownHelper_c2032766951c9a19f3bfdd1f7e5bf123 , 28 * CooldownHelper_6230e23f021dec637edabaa368556c06, "OUTLINE"); end self.CooldownHelper_e6955c64cf39bdb23dc86de1a9ec2117.CooldownHelper_6230e23f021dec637edabaa368556c06 = CooldownHelper_6230e23f021dec637edabaa368556c06; end if (self.CooldownHelper_e6955c64cf39bdb23dc86de1a9ec2117.CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b ~= CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b) then self.CooldownHelper_e6955c64cf39bdb23dc86de1a9ec2117:SetText(CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b); self.CooldownHelper_e6955c64cf39bdb23dc86de1a9ec2117.CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b = CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b; self.CooldownHelper_e6955c64cf39bdb23dc86de1a9ec2117.CooldownHelper_7ea16d69ee68978a562320944cf1ea36 = true; end if (self.CooldownHelper_e6955c64cf39bdb23dc86de1a9ec2117.CooldownHelper_3ae1f2c4b38d5f7c356b4cdb7c6e4027 ~= CooldownHelper_3ae1f2c4b38d5f7c356b4cdb7c6e4027 or self.CooldownHelper_e6955c64cf39bdb23dc86de1a9ec2117.CooldownHelper_0f402d7ba502a47a51c410aee99b1ff1 ~= CooldownHelper_0f402d7ba502a47a51c410aee99b1ff1 or self.CooldownHelper_e6955c64cf39bdb23dc86de1a9ec2117 ~= CooldownHelper_a0a053cacf1c8c43346fdc3adb684cb7) then self.CooldownHelper_e6955c64cf39bdb23dc86de1a9ec2117:SetTextColor(CooldownHelper_3ae1f2c4b38d5f7c356b4cdb7c6e4027, CooldownHelper_0f402d7ba502a47a51c410aee99b1ff1, CooldownHelper_a0a053cacf1c8c43346fdc3adb684cb7,0.8); self.CooldownHelper_e6955c64cf39bdb23dc86de1a9ec2117.CooldownHelper_3ae1f2c4b38d5f7c356b4cdb7c6e4027 = CooldownHelper_3ae1f2c4b38d5f7c356b4cdb7c6e4027; self.CooldownHelper_e6955c64cf39bdb23dc86de1a9ec2117.CooldownHelper_0f402d7ba502a47a51c410aee99b1ff1 = CooldownHelper_0f402d7ba502a47a51c410aee99b1ff1; self.CooldownHelper_e6955c64cf39bdb23dc86de1a9ec2117.CooldownHelper_a0a053cacf1c8c43346fdc3adb684cb7 = CooldownHelper_a0a053cacf1c8c43346fdc3adb684cb7; end end else self.CooldownHelper_e6955c64cf39bdb23dc86de1a9ec2117:SetText(""); if (self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54 and self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54:IsVisible()) then self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54:Hide(); end end if (self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_1c2c71f24bf891baa25701abcef4a644 and CooldownHelper_74f9a11185032e7f1405143a179881b1 and CooldownHelper_c4d605743451f17ab862454a73a7dc7d[CooldownHelper_74f9a11185032e7f1405143a179881b1] and CooldownHelper_c4d605743451f17ab862454a73a7dc7d[CooldownHelper_74f9a11185032e7f1405143a179881b1][self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_1c2c71f24bf891baa25701abcef4a644]) then if (not self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b) then self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b = 0; else self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b = self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b + arg1; if (self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b >= CooldownHelper_c4d605743451f17ab862454a73a7dc7d[CooldownHelper_74f9a11185032e7f1405143a179881b1][self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_1c2c71f24bf891baa25701abcef4a644].duration) then self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b = CooldownHelper_c4d605743451f17ab862454a73a7dc7d[CooldownHelper_74f9a11185032e7f1405143a179881b1][self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_1c2c71f24bf891baa25701abcef4a644].duration; end end self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54:Show(); if (CooldownHelper_c4d605743451f17ab862454a73a7dc7d[CooldownHelper_74f9a11185032e7f1405143a179881b1][self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_1c2c71f24bf891baa25701abcef4a644].alphaStart) then self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54:SetAlpha(CooldownHelper_c4d605743451f17ab862454a73a7dc7d[CooldownHelper_74f9a11185032e7f1405143a179881b1][self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_1c2c71f24bf891baa25701abcef4a644].alphaStart + (CooldownHelper_c4d605743451f17ab862454a73a7dc7d[CooldownHelper_74f9a11185032e7f1405143a179881b1][self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_1c2c71f24bf891baa25701abcef4a644].alphaEnd - CooldownHelper_c4d605743451f17ab862454a73a7dc7d[CooldownHelper_74f9a11185032e7f1405143a179881b1][self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_1c2c71f24bf891baa25701abcef4a644].alphaStart) * self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b / CooldownHelper_c4d605743451f17ab862454a73a7dc7d[CooldownHelper_74f9a11185032e7f1405143a179881b1][self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_1c2c71f24bf891baa25701abcef4a644].duration); else self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54:SetAlpha(1.0); end if (CooldownHelper_c4d605743451f17ab862454a73a7dc7d[CooldownHelper_74f9a11185032e7f1405143a179881b1][self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_1c2c71f24bf891baa25701abcef4a644].scaleStart) then local CooldownHelper_6230e23f021dec637edabaa368556c06 = CooldownHelper_c4d605743451f17ab862454a73a7dc7d[CooldownHelper_74f9a11185032e7f1405143a179881b1][self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_1c2c71f24bf891baa25701abcef4a644].scaleStart + (CooldownHelper_c4d605743451f17ab862454a73a7dc7d[CooldownHelper_74f9a11185032e7f1405143a179881b1][self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_1c2c71f24bf891baa25701abcef4a644].scaleEnd - CooldownHelper_c4d605743451f17ab862454a73a7dc7d[CooldownHelper_74f9a11185032e7f1405143a179881b1][self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_1c2c71f24bf891baa25701abcef4a644].scaleStart) * self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b / CooldownHelper_c4d605743451f17ab862454a73a7dc7d[CooldownHelper_74f9a11185032e7f1405143a179881b1][self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_1c2c71f24bf891baa25701abcef4a644].duration; self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54:SetWidth(self.CooldownHelper_99f3cf2c6f1fdfadb0fd4ab6e0843bf5:GetWidth() * CooldownHelper_6230e23f021dec637edabaa368556c06); self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54:SetHeight(self.CooldownHelper_99f3cf2c6f1fdfadb0fd4ab6e0843bf5:GetHeight() * CooldownHelper_6230e23f021dec637edabaa368556c06); else self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54:SetWidth(self.CooldownHelper_99f3cf2c6f1fdfadb0fd4ab6e0843bf5:GetWidth()); self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54:SetHeight(self.CooldownHelper_99f3cf2c6f1fdfadb0fd4ab6e0843bf5:GetHeight()); end if (self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b == CooldownHelper_c4d605743451f17ab862454a73a7dc7d[CooldownHelper_74f9a11185032e7f1405143a179881b1][self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_1c2c71f24bf891baa25701abcef4a644].duration) then self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_1c2c71f24bf891baa25701abcef4a644 = self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_1c2c71f24bf891baa25701abcef4a644 + 1; self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b = nil; if (not CooldownHelper_c4d605743451f17ab862454a73a7dc7d[CooldownHelper_74f9a11185032e7f1405143a179881b1][self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_1c2c71f24bf891baa25701abcef4a644]) then self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_1c2c71f24bf891baa25701abcef4a644 = nil; self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54:Hide(); else self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54:SetTexture(CooldownHelper_c4d605743451f17ab862454a73a7dc7d[CooldownHelper_74f9a11185032e7f1405143a179881b1][self.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54.CooldownHelper_1c2c71f24bf891baa25701abcef4a644].texture); end end end end function CooldownHelper_36ecb7c19c332ac94942a640f9029bbb(CooldownHelper_483bc539b955fbfef489b2bf959067f4) local CooldownHelper_99f3cf2c6f1fdfadb0fd4ab6e0843bf5 = CooldownHelper_483bc539b955fbfef489b2bf959067f4:GetParent(); local CooldownHelper_de474c4a74251c7e8e966e2325faad9c = CooldownHelper_483bc539b955fbfef489b2bf959067f4:GetName() or ""; if (CooldownHelper_99f3cf2c6f1fdfadb0fd4ab6e0843bf5.CooldownHelper_5012602e64d488d51ccb4fc3b6b6f560) then CooldownHelper_99f3cf2c6f1fdfadb0fd4ab6e0843bf5.CooldownHelper_5012602e64d488d51ccb4fc3b6b6f560:Show(); else local CooldownHelper_411b8aa6d5954c6020f0b9c9e80e847a = CreateFrame("Frame", nil, CooldownHelper_99f3cf2c6f1fdfadb0fd4ab6e0843bf5); CooldownHelper_411b8aa6d5954c6020f0b9c9e80e847a:SetAllPoints(CooldownHelper_99f3cf2c6f1fdfadb0fd4ab6e0843bf5) CooldownHelper_411b8aa6d5954c6020f0b9c9e80e847a:SetFrameLevel(CooldownHelper_99f3cf2c6f1fdfadb0fd4ab6e0843bf5:GetFrameLevel() + 10) CooldownHelper_411b8aa6d5954c6020f0b9c9e80e847a.CooldownHelper_483bc539b955fbfef489b2bf959067f4 = CooldownHelper_483bc539b955fbfef489b2bf959067f4; CooldownHelper_411b8aa6d5954c6020f0b9c9e80e847a.CooldownHelper_99f3cf2c6f1fdfadb0fd4ab6e0843bf5 = CooldownHelper_99f3cf2c6f1fdfadb0fd4ab6e0843bf5; CooldownHelper_411b8aa6d5954c6020f0b9c9e80e847a:SetAllPoints(CooldownHelper_483bc539b955fbfef489b2bf959067f4); CooldownHelper_411b8aa6d5954c6020f0b9c9e80e847a:SetFrameLevel(CooldownHelper_99f3cf2c6f1fdfadb0fd4ab6e0843bf5:GetFrameLevel() + 1); CooldownHelper_411b8aa6d5954c6020f0b9c9e80e847a.CooldownHelper_e6955c64cf39bdb23dc86de1a9ec2117 = CooldownHelper_411b8aa6d5954c6020f0b9c9e80e847a:CreateFontString(nil, "OVERLAY"); CooldownHelper_411b8aa6d5954c6020f0b9c9e80e847a.CooldownHelper_e6955c64cf39bdb23dc86de1a9ec2117:SetPoint("CENTER", CooldownHelper_99f3cf2c6f1fdfadb0fd4ab6e0843bf5, "CENTER", 0, 0); CooldownHelper_411b8aa6d5954c6020f0b9c9e80e847a.CooldownHelper_e6955c64cf39bdb23dc86de1a9ec2117:SetJustifyH("CENTER"); if (CooldownHelper_99f3cf2c6f1fdfadb0fd4ab6e0843bf5:GetWidth() < 28) then CooldownHelper_411b8aa6d5954c6020f0b9c9e80e847a.CooldownHelper_a5f385de1e5be146a0f45dda4aa293be = true; CooldownHelper_411b8aa6d5954c6020f0b9c9e80e847a.CooldownHelper_e6955c64cf39bdb23dc86de1a9ec2117:SetFont(CooldownHelper_c2032766951c9a19f3bfdd1f7e5bf123, 14, "OUTLINE"); else CooldownHelper_411b8aa6d5954c6020f0b9c9e80e847a.CooldownHelper_a5f385de1e5be146a0f45dda4aa293be = nil; CooldownHelper_411b8aa6d5954c6020f0b9c9e80e847a.CooldownHelper_e6955c64cf39bdb23dc86de1a9ec2117:SetFont(CooldownHelper_c2032766951c9a19f3bfdd1f7e5bf123, 28, "OUTLINE"); end CooldownHelper_411b8aa6d5954c6020f0b9c9e80e847a.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54 = CooldownHelper_411b8aa6d5954c6020f0b9c9e80e847a:CreateTexture(nil, "OVERLAY"); CooldownHelper_411b8aa6d5954c6020f0b9c9e80e847a.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54:SetPoint("CENTER" , CooldownHelper_99f3cf2c6f1fdfadb0fd4ab6e0843bf5, "CENTER", 0, 0) CooldownHelper_411b8aa6d5954c6020f0b9c9e80e847a.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54:SetWidth(CooldownHelper_99f3cf2c6f1fdfadb0fd4ab6e0843bf5:GetWidth()); CooldownHelper_411b8aa6d5954c6020f0b9c9e80e847a.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54:SetHeight(CooldownHelper_99f3cf2c6f1fdfadb0fd4ab6e0843bf5:GetHeight()); CooldownHelper_411b8aa6d5954c6020f0b9c9e80e847a.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54:SetBlendMode("ADD"); CooldownHelper_411b8aa6d5954c6020f0b9c9e80e847a.CooldownHelper_461f7690e0bf08e1f13bbad50f3c1c54:Hide(); CooldownHelper_411b8aa6d5954c6020f0b9c9e80e847a.CooldownHelper_9a2474218860c0816af6c2bfe48d200a = 0; CooldownHelper_411b8aa6d5954c6020f0b9c9e80e847a:SetScript("OnUpdate", CooldownHelper_9797f05813b10425b6f155c6b24d093c); CooldownHelper_411b8aa6d5954c6020f0b9c9e80e847a:SetScript("OnHide", function(self) self.CooldownHelper_e6955c64cf39bdb23dc86de1a9ec2117.CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b = nil; end); CooldownHelper_411b8aa6d5954c6020f0b9c9e80e847a:SetScript("OnShow", function(self) self.CooldownHelper_e6955c64cf39bdb23dc86de1a9ec2117.CooldownHelper_da4b94f92d67ca9ccecb24bec1db6e2b = nil; end); CooldownHelper_99f3cf2c6f1fdfadb0fd4ab6e0843bf5.CooldownHelper_5012602e64d488d51ccb4fc3b6b6f560 = CooldownHelper_411b8aa6d5954c6020f0b9c9e80e847a; CooldownHelper_99f3cf2c6f1fdfadb0fd4ab6e0843bf5.CooldownHelper_5012602e64d488d51ccb4fc3b6b6f560:Show(); end return CooldownHelper_99f3cf2c6f1fdfadb0fd4ab6e0843bf5.CooldownHelper_5012602e64d488d51ccb4fc3b6b6f560; end local NUM_TOT_AURA_ROWS=3 local AURA_ROW_WIDTH=125 function BFCH_ToggleAdjustBuffSize(toggle) if toggle then BFCH_Old_TargetFrame_UpdateAuraPositions=TargetFrame_UpdateAuraPositions TargetFrame_UpdateAuraPositions=BFCH_TargetFrame_UpdateAuraPositions BFCH_MYBUFF_SIZE=BFCH_MYBUFF_SIZE or 23 BFCH_OTHERBUFF_SIZE=BFCH_OTHERBUFF_SIZE or 17 TargetFrame_UpdateAuras() else TargetFrame_UpdateAuraPositions=BFCH_Old_TargetFrame_UpdateAuraPositions or TargetFrame_UpdateAuraPositions end end function BFCH_AdjustMyBuffSize(arg) BFCH_MYBUFF_SIZE=arg or BFCH_MYBUFF_SIZE TargetFrame_UpdateAuras() end function BFCH_AdjustOtherBuffSize(arg) BFCH_OTHERBUFF_SIZE=arg or BFCH_OTHERBUFF_SIZE TargetFrame_UpdateAuras() end BFCH_TargetFrame_UpdateAuraPositions=function(auraName, numAuras, numOppositeAuras, largeAuraList, updateFunc, maxRowWidth, offsetX) local AURA_OFFSET_Y=BFCH_MYBUFF_SIZE-BFCH_OTHERBUFF_SIZE; local size; local offsetY = AURA_OFFSET_Y; local rowWidth = 0; local firstBuffOnRow = 1; for i=1, numAuras do if ( largeAuraList[i] ) then size = BFCH_MYBUFF_SIZE; else size = BFCH_OTHERBUFF_SIZE; end if ( i == 1 ) then rowWidth = size; TargetFrame.auraRows = TargetFrame.auraRows + 1; else rowWidth = rowWidth + size + offsetX; end if ( rowWidth > maxRowWidth ) then updateFunc(auraName, i, numOppositeAuras, firstBuffOnRow, size, offsetX, offsetY); rowWidth = size; TargetFrame.auraRows = TargetFrame.auraRows + 1; firstBuffOnRow = i; offsetY = AURA_OFFSET_Y; if ( TargetFrame.auraRows > NUM_TOT_AURA_ROWS ) then maxRowWidth = AURA_ROW_WIDTH; end else updateFunc(auraName, i, numOppositeAuras, i - 1, size, offsetX, offsetY); end end end
