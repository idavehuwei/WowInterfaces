 MobHealth_ShowHealthPercent = nil; MobHealth_ShowHealthPP = nil; MobHealth_ShowManaPoint = nil; local MobHealth_Eventer = BLibrary("BEvent"); function MobHealth_Display() if (not UnitExists("target")) then return; end local MobHealth_d332bff5fbb0f02f149db973258268a4 = getglobal("MobHealthText"); local MobHealth_4d4b69cc3898198cee4d5247361413a2 = getglobal("MobManaText"); local MobHealth_db2e34bc03f375a2abda68fc28730133 = UnitHealth("target"); local MobHealth_4df8bc8a99e8bc700bf31353aad21ba8 = UnitHealthMax("target"); local MobHealth_ea4eac480c6a6767e84c51b6864de476 = UnitMana("target"); local MobHealth_b00b0341adf15fef7dcc34d588146853 = UnitManaMax("target"); local MobHealth_100767d05d3f6aecb333e18c068c65a8 = ""; local MobHealth_af08683f09dac39ab8a566fa459a5168 = ""; if (MobHealth_db2e34bc03f375a2abda68fc28730133 > 0 and MobHealth_4df8bc8a99e8bc700bf31353aad21ba8 > 0) then if (MobHealth_ShowHealthPPT) then MobHealth_100767d05d3f6aecb333e18c068c65a8 = MobHealth_100767d05d3f6aecb333e18c068c65a8 .. MobHealth_db2e34bc03f375a2abda68fc28730133 .. "/" .. MobHealth_4df8bc8a99e8bc700bf31353aad21ba8; end if (MobHealth_ShowHealthPercent) then local MobHealth_80b122b2b55d9fee0b4effccf185d249 = math.floor(MobHealth_db2e34bc03f375a2abda68fc28730133*100/MobHealth_4df8bc8a99e8bc700bf31353aad21ba8); if (MobHealth_ShowHealthPPT) then MobHealth_100767d05d3f6aecb333e18c068c65a8 = MobHealth_100767d05d3f6aecb333e18c068c65a8 .. " " .. "(" .. MobHealth_80b122b2b55d9fee0b4effccf185d249 .. "%)"; else MobHealth_100767d05d3f6aecb333e18c068c65a8 = MobHealth_100767d05d3f6aecb333e18c068c65a8 .. MobHealth_80b122b2b55d9fee0b4effccf185d249 .. "%"; end end end if (MobHealth_ea4eac480c6a6767e84c51b6864de476 > 0 and MobHealth_b00b0341adf15fef7dcc34d588146853 > 0) then if (MobHealth_ShowManaPoint) then MobHealth_af08683f09dac39ab8a566fa459a5168 = MobHealth_af08683f09dac39ab8a566fa459a5168 .. MobHealth_ea4eac480c6a6767e84c51b6864de476 .. "/" .. MobHealth_b00b0341adf15fef7dcc34d588146853; end end MobHealth_d332bff5fbb0f02f149db973258268a4:SetText(MobHealth_100767d05d3f6aecb333e18c068c65a8); MobHealth_4d4b69cc3898198cee4d5247361413a2:SetText(MobHealth_af08683f09dac39ab8a566fa459a5168); end function MobHealth_Toggle(arg) if (arg == 1) then MobHealth_Eventer:RegisterEvent("UNIT_HEALTH"); MobHealth_Eventer:RegisterEvent("PLAYER_TARGET_CHANGED"); MobHealth_Eventer:RegisterEvent("UNIT_COMBAT"); MobHealth_Eventer:RegisterEvent("UNIT_MANA"); TargetFrameHealthBarText:SetAlpha(0); TargetFrameManaBarText:SetAlpha(0); else MobHealth_Eventer:UnregisterAllEvent(); TargetFrameHealthBarText:SetAlpha(1); TargetFrameManaBarText:SetAlpha(1); end end function MobHealth_OnLoad(self) end function MobHealth_Eventer:UNIT_HEALTH(unit) MobHealth_Display(); end function MobHealth_Eventer:UNIT_MANA(unit) MobHealth_Display(); end function MobHealth_Eventer:PLAYER_TARGET_CHANGED() MobHealth_Display(); end 
